<!doctype html>
<html>
<head>
<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-status-bar-style" content="black">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=device-width, user-scalable = no, initial-scale=1.0">
<meta charset="utf-8">
<title>K2400 Clock</title>
<style>
	body 										{background-color: white; color: #555555; text-decoration: none; font-family: "Trebuchet MS", Helvetica, sans-serif; font-weight: bold; margin-left: 40px; margin-right: 40px;}
	p 											{color: #555555; text-indent: 10px; text-transform: uppercase; margin:50px 0px 0px 0px; font-size: 18px; padding-bottom: 10px;}
	.propertycontainer 							{width: 100%; min-width: 175px; max-width: 500px; margin: 0 auto; margin-bottom: 50px;}
	.textcontainer 								{width: 100%; min-width: 175px; max-width: 500px; margin: 0 auto; text-align: center; margin-top: 30px; margin-bottom: -15px;}
	.buttoncontainer 							{width: 100%; text-align: center; margin-top: 30px}
	.textboxcontainer 							{width: 100%; text-align: center; margin-top: 30px; color: #555555; font-size: 16px;}
	.btn 										{-webkit-border-radius: 30;  -moz-border-radius: 30;  border-radius: 30px;  height: 30px;	width: 50%; font-family: Arial;  color: #555555;  font-size: 16px;  background: #dddddd; text-decoration: none; font-family: "Trebuchet MS", Helvetica, sans-serif; font-weight: bold; border:none;}
	.btn:active									{color: #dddddd; background: #555555;}
	.textbox 									{-webkit-border-radius: 30;  -moz-border-radius: 30;  box-sizing: border-box; -moz-box-sizing: border-box;-webkit-box-sizing: border-box; border-radius: 30px; width: 100%; height: 30px; font-family: Arial; color: #555555; font-size: 16px; background: #dddddd; text-decoration: none; font-family: "Trebuchet MS", Helvetica, sans-serif; font-weight: bold; border:none; padding-left:15px; padding-right:15px;}
	.text										{width: 100%; height: 30px; font-size: 30px; padding-left:10px; padding-right:10px;}
	.smalltext									{width: 100%; height: 30px; font-size: 16px; }
	.disclaimer									{width: 100%; font-size: 10px; z-index: 2000; bottom: 10px; text-align: center; color: #555555;}

</style>

<script>

function wifiInputValidation() {

var ssid = document.getElementById("SSID").value;
var pw = document.getElementById("password").value;
var name = document.getElementById("name").value;

	if ((ssid == "") || (pw == "") || (name == "")) {
		alert('Please complete all the fields before saving.');
		return false;
	}
	if ((ssid.length > 32)) {
		alert('SSID cannot be longer than 32 characters');
		return false;
	}
	if ((pw.length > 63)) {
		alert('Password cannot be longer than 63 characters');
		return false;
	}
	if ((name.length > 16)) {
		alert('Device name cannot be longer than 16 characters');
		return false;
	}
return true;
}

function wifisave() {

	if(wifiInputValidation()) {
		var ssid = document.getElementById("SSID").value;
		var pw = document.getElementById("password").value;
		var name = document.getElementById("name").value;

		var xhr = new XMLHttpRequest();
		xhr.open('POST', 'wifisave?ssid=' + ssid + '&password=' + pw+ '&name=' + name);
		xhr.onload = function() {
		  if (xhr.status === 200) {
			  alert("WIFI settings saved and attempting to connect. Connect this device to your wireless network. When using an IOS device go to 'name of device'.local to control to the clock. When using another device use the discover application to find the clock on your network.");
		 }
		 else {
			 alert("ERROR - Please reset the clock and try again.");
		 }
		};
		xhr.send();
	}
}

</script>

</head>
<body>

<div class="propertycontainer">
	<p>Connect to WLAN</p>
    <div class="textboxcontainer">
    	<input type="text" class="textbox" id="SSID" placeholder="Enter SSID" />
    </div>
    <div class="textboxcontainer">
    	<input type="password" class="textbox" id="password" placeholder="Enter PASSWORD"/>
    </div>
	<div class="textcontainer">
		<span class="smalltext" >Name of your device: </span>
	</div>
	<div class="textboxcontainer">
    	<input type="text" class="textbox" id="name" value="K2400"/>
    </div>
	<div class="buttoncontainer">
        <button class="btn" onClick="wifisave()" type="button">SAVE</button> 
    </div>
</div>
<div class="disclaimer">
	<span>Copyright Â© 2018 | Velleman</span>
</div>
</body>
</html>
